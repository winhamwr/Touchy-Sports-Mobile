<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
	<title></title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script type="text/javascript" src="js/jquery-1.3.2.js"></script>
	<script type="text/javascript" src="js/jquery.ultimateCanvas.js"></script>
	<script type="text/javascript" src="js/baseDbController.js"></script>
	<script type="text/javascript" src="js/json2.js"></script>
	<style type="text/css">
		#games > .game{
			padding-top: 2em;
			padding-bottom: 2em;
			border: .25em solid red;
		}
		#games {
			display: inline;
		}
	</style>
  </head>
  <body>
	  <div id="control_bar">
		  <button id="reset_game">Reset Game</button>
		  <button id="reset_all">Reset All</button>
	  </div>
	  <div id="games">

	  </div>
    
	<script type="text/javascript">
		$(document).ready(function(){
			var $games = $('#games');
			var $db = new db_controller();
			var game_ids = $db.getStoredGames();
			var used_ids = [];
			$.each(game_ids, function(i, val){
				if($.inArray(val, used_ids) != -1){
					return;
				}
				used_ids.push(val);

				$db.continueGame(val);
				var game = $db._getGameData();
				var game_str = JSON.stringify(game);
				$games.append('<h2 class="game_id">'+val+'</h2>');
				$games.append('<div class="game" id="game_'+val+'">'+game_str+'</div>');
			});

			$('#reset_game').click(function(event){
				$db.startNewGame();
			});
			$('#reset_all').click(function(event){
				localStorage.clear();
			});
		});
	</script>
  </body>
</html>
